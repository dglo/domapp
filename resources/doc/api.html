<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE"
 content="text/html; charset=windows-1252">
  <title>DOMApp API</title>
  <meta name="GENERATOR" content="OpenOffice.org 1.9.79  (Win32)">
  <meta name="AUTHOR" content="John Jacobsen">
  <meta name="CREATED" content="20040823;12325500">
  <meta name="CHANGEDBY" content="John Jacobsen">
  <meta name="CHANGED" content="20050309;22300700">
  <meta name="SDFOOTNOTE" content=";;;;P">
  <meta name="SDENDNOTE" content="ARABIC">
  <style type="">
<!--
body {
background-color: #F5F5CF;
font-family: serif;
font-size: 12pt;
}

h1 {
text-align: center;
font-size: 20pt;
font-weight: normal;
background-color: #FFFFFF;
border-style: ridge none none none;
border-width: thin 0 0 0;
padding: .2em 0 0 0;
}

h2 {
font-size: 12pt;
background-color: #FFFFFF;
border-style: ridge none none none;
border-width: thin 0 0 0;
padding: .2em;
}

h3 {
font-size: 12pt;
}

.terminal {
font: 10pt monospace;
background-color: #FFFFFF;
border-style: dashed;
border-width: thin;
padding: .2em .2em .2em 1em;
margin: 0 5% 0 2%;
}

.terminalOld {
font: 10pt monospace;
background-color: #FFFFFF;
border-style: dashed;
border-width: thin;
padding: .2em .2em .2em 1em;
white-space: pre;
margin: 0 5% 0 2%;
}

font.todo {
color: red;
}

.footer {
font: 10pt monospace;
text-align: right;
}

-->
  </style>
</head>
<body dir="ltr" lang="en-US">
<div style="text-align: left;">
<table style="text-align: left;" border="0" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"> <big><big><big>Domapp API </big>&nbsp;&nbsp;
      </big></big><br>
      </td>
      <td style="vertical-align: top;">John Jacobsen <br>
      <span style="font-family: monospace;">jacobsen@npxdesigns.com</span><br>
Last revision 7/18/2005<br>
      <span style="font-family: monospace;">$Id: api.html,v 1.3
2005/06/10 16:32:32 jacobsen Exp $</span><br>
      </td>
    </tr>
  </tbody>
</table>
<a href="index.html">Code Status</a> | API | <a
 href="domapp_testing.html">Test SW</a> | <a
 href="domapp_test_status.html">Testing Status</a><br>
</div>
<h2><big>CONTENTS</big></h2>
<span style="font-weight: bold;">
</span>
<div style="margin-left: 40px;"><a href="#intro">Introduction</a><br>
<div style="margin-left: 40px;"><a href="#completion">Completion
Status</a><br>
<a href="#links">Links</a><br>
<a href="#overview">API Overview</a><br>
</div>
<a href="#procedure">Outline of
Procedure for Taking Data</a><br>
<a href="#monitoring">Monitoring</a><br>
<a href="#triggering">SPE and Calibration Triggers</a><br>
<a href="#messaging">Messaging Specification</a><br>
<a href="#dataformats">Data Formats</a><br>
<a href="#supernova">Supernova Data</a><br>
<a href="#flasher">Run Modes and Flasher Functionality</a><br>
<a href="#messagesdescribedindetail">Messages Described in Detail</a><br>
<span style="font-style: italic; color: rgb(255, 0, 0);">!!! </span><a
 href="#differences">Differences Between Testdomapp and Domapp</a><span
 style="font-style: italic; color: rgb(255, 0, 0);"> !!!</span><br>
<a href="#changelog">Changelog</a><br>
</div>
<b><br>
</b>
<h2><big><small><span style="font-weight: bold;"><a name="intro"></a>INTRODUCTION</span></small></big></h2>
<big><small>
This document describes the messaging
interface to the production version of the IceCube DOM Application
(domapp), which uses the DOMApp FPGA design.</small></big><span
 style="font-weight: bold;"><br>
</span>
<h3><span style="font-weight: bold;"><a name="completion"></a>COMPLETION
STATUS</span></h3>
Most key messages are added now, some fine tuning is in progress.<span
 style="font-weight: bold;"><br>
</span>
<h3><span style="font-weight: bold;"><a name="links"></a>LINKS</span></h3>
<a href="index.html">Domapp
Implementation Status</a><br>
<a href="domapp_testing.html">Domapp Test Scripts</a><br>
<h3><span style="font-weight: bold;"><a name="overview"></a>API OVERVIEW</span></h3>
The API to Domapp takes the form of
fixed-format binary messages (described below).&nbsp; Messages consist
of an 8 byte header with an additional payload of 0-4084
bytes.&nbsp;&nbsp; Messages sent by the surface generate reply messages
from the DOMs.&nbsp; When Domapp is running, the DOM never sends a
message unless a request
message has been sent by the surface.
<h2><b><a name="procedure"></a>OUTLINE OF PROCEDURE FOR TAKING DATA</b></h2>
<ol start="1">
  <li> <font size="3">Optionally, reset monitoring buffer to eliminate
messages from the previous run (</font><font style="font-size: 11pt;"
 size="2"><a href="#DATA_ACC_RESET_MONI_BUF">DATA_ACC_RESET_MONI_BUF</a>).<br>
    <br>
    </font></li>
  <li><font size="3">Set DACs (except high
voltage). <b>Flasher Board runs require special DAC settings.</b></font><br>
    <br>
  </li>
  <li><span style="color: rgb(153, 153, 153);"></span>If running with
RoadGrader
compression, tell domapp to collect pedestal data <span
 style="color: rgb(153, 153, 153);">(<a
 href="#EXPCONTROL_DO_PEDESTAL_COLLECTION">EXPCONTROL_DO_PEDESTAL_COLLECTION</a>)</span>.&nbsp;
    <span style="font-weight: bold;">Do this before you turn on high
voltage!</span>&nbsp; If desired, read out pedestal averages <span
 style="color: rgb(153, 153, 153);">(<a
 href="#EXPCONTROL_GET_PEDESTAL_AVERAGES">EXPCONTROL_GET_PEDESTAL_AVERAGES</a>)</span>
or number of triggers collected <span
 style="color: rgb(153, 153, 153);">(<a
 href="#EXPCONTROL_GET_NUM_PEDESTALS">EXPCONTROL_GET_NUM_PEDESTALS</a>)</span>.&nbsp;
Set the appropriate RoadGrader threshold <span
 style="color: rgb(153, 153, 153);">(<a
 href="#DATA_ACC_SET_BASELINE_THRESHOLD">DATA_ACC_SET_BASELINE_THRESHOLD</a>)</span>.
  </li>
  <br>
  <li><font size="3">Set DOM high voltage, <b>unless doing Flasher
Board run</b>.</font> <span style="color: rgb(153, 153, 153);">Required
messages: <a href="#DSC_ENABLE_PMT_HV">DSC_ENABLE_PMT_HV</a>, <a
 href="#DSC_SET_PMT_HV">DSC_SET_PMT_HV</a>, <a href="#DSC_QUERY_PMT_HV">DSC_QUERY_PMT_HV</a>
(to check
that the voltage is set).</span><br>
    <br>
  </li>
  <li><font size="3">If desired, turn on
local coincide<span style=""><span style="font-style: normal;">nce <span
 style="color: rgb(153, 153, 153);">with </span><font
 style="font-size: 11pt; color: rgb(153, 153, 153);" size="2"><a
 href="#DSC_SET_LOCAL_COIN_MODE">DSC_SET_LOCAL_COIN_MODE</a>
(1)
and <a href="#DSC_SET_LOCAL_COIN_WINDOW">DSC_SET_LOCAL_COIN_WINDOW</a>.
Optionally, for new DOMAPP FPGA functions, do any of <a
 href="#DSC_SET_LC_TYPE">DSC_SET_LC_TYPE</a>,&nbsp; <a
 href="#DSC_SET_LC_TX">DSC_SET_LC_TX</a>, <a href="#DSC_SET_LC_SRC">DSC_SET_LC_SRC</a>,
    <a href="#DSC_SET_LC_SPAN">DSC_SET_LC_SPAN</a>, and <a
 href="#DSC_SET_LC_CABLE_LEN">DSC_SET_LC_CABLE_LEN</a>.<br>
    </font></span></span></font><br>
  </li>
  <li><font size="3"><span style=""><span style="font-style: normal;"></span></span></font><font
 size="3">Set
the triggering mode <span style="color: rgb(153, 153, 153);">(</span><font
 style="font-size: 11pt;" size="2"><span
 style="color: rgb(153, 153, 153);"><a href="api.html#DSC_SET_TRIG_MODE">DSC_SET_TRIG_MODE</a>)</span>
    </font>to
trigger type 2 (discriminator trigger), for both regular
PMT triggers and also for digitizing LED currents in flasher board
data.&nbsp; Set data compression mode and data format type (<span
 style="color: rgb(153, 153, 153);"><a
 href="api.html#DATA_ACC_SET_DATA_FORMAT">DATA_ACC_SET_DATA_FORMAT</a>
and <a href="api.html#DATA_ACC_SET_COMP_MODE">DATA_ACC_SET_COMP_MODE</a></span></font>&nbsp;
Note: Do not <font size="3"><span style="color: rgb(153, 153, 153);"><a
 href="api.html#DATA_ACC_SET_COMP_MODE">DATA_ACC_SET_COMP_MODE</a> </span></font>before
you <span style="color: rgb(153, 153, 153);"><a
 href="api.html#EXPCONTROL_DO_PEDESTAL_COLLECTION">EXPCONTROL_DO_PEDESTAL_COLLECTION</a></span>!!!).<br>
  </li>
  <br>
  <li>If desired, enable supernova data collection with <font
 style="font-size: 11pt;" size="2"><a href="#DSC_ENABLE_SN">DSC_ENABLE_SN</a>.<br>
    <br>
    </font></li>
  <li><font size="3">Start collecting
data: <span style="color: rgb(153, 153, 153);"><a
 href="api.html#EXPCONTROL_BEGIN_RUN">EXPCONTROL_BEGIN_RUN</a>
(normal run) or <a href="api.html#EXPCONTROL_BEGIN_FB_RUN">EXPCONTROL_BEGIN_FB_RUN</a>(...)
(flasher board run)</span></font> </li>
  <li>
    <p style="margin-bottom: 0in;"><font size="3">Wait for data to get
collected; read out periodically using <a href="#DATA_ACC_GET_DATA">DATA_ACC_GET_DATA</a>.&nbsp;
Also, fetch monitoring records with </font><font
 style="font-size: 11pt;" size="2"><a href="#DATA_ACC_GET_NEXT_MONI_REC">DATA_ACC_GET_NEXT_MONI_REC</a>.&nbsp;
And, if desired, fetch supernova data with <a
 href="#DATA_ACC_GET_SN_DATA">DATA_ACC_GET_SN_DATA</a>.<br>
    </font></p>
  </li>
  <li>
    <p style="margin-bottom: 0in;"><font size="3">Stop collecting data:
    <span style="color: rgb(153, 153, 153);"><a
 href="#EXPCONTROL_END_RUN">EXPCONTROL_END_RUN</a> or <a
 href="#EXPCONTROL_END_FB_RUN">EXPCONTROL_END_FB_RUN</a></span></font></p>
  </li>
  <li>
    <p style="margin-bottom: 0in;"><font size="3">If previously set,
turn off local coincidence with <span
 style="color: rgb(153, 153, 153);"><span style="font-style: normal;"><a
 href="#DSC_SET_LOCAL_COIN_MODE">DSC_SET_LOCAL_COIN_MODE</a>
(0).<br>
    </span></span></font></p>
  </li>
  <li>
    <p style="margin-bottom: 0in;"><font size="3">If previously
enabled, disable supernova data taking with </font><font
 style="font-size: 11pt;" size="2"><a href="#DSC_DISABLE_SN">DSC_DISABLE_SN</a></font></p>
  </li>
  <li>
    <p style="margin-bottom: 0in;"><font size="3">Turn off high voltage
(<b>unless this was a Flasher Board run</b>).&nbsp;<span
 style="color: rgb(153, 153, 153);"> Required messages: <a
 href="#DSC_SET_PMT_HV">DSC_SET_PMT_HV</a>
(set to 0), <a href="#DSC_DISABLE_PMT_HV">DSC_DISABLE_PMT_HV</a>.</span><br>
    </font></p>
  </li>
</ol>
<h2><a name="monitoring"></a>MONITORING</h2>
The monitoring is configured and read
out via DATA_ACCESS messages
described below.&nbsp; The basic types of monitoring messages are as
followed:
<ul>
  <li>ASCII (diagnostic) messages</li>
  <li>Periodic hardware state snapshot</li>
  <li>Periodic software state snapshot</li>
  <li>State change (e.g. DAC change) messages</li>
</ul>
These are described in more detail a <a
 href="http://docushare.icecube.wisc.edu/docushare/dsweb/Get/Document-3799/DOMmonitorfmtbinary_3_8.pdf">document</a>
in the <a
 href="http://docushare.icecube.wisc.edu/docushare/dsweb/View/Collection-517">DOM
Data Formats</a> directory on <a
 href="http://docushare.icecube.wisc.edu/docushare/dsweb/HomePage">Docushare</a>.&nbsp;
<big style="font-style: italic;">Note:</big> <font
 style="font-size: 11pt;" size="2">Triggering in the DOM is now <span
 style="font-weight: bold;">disabled </span>momentarily when the PMT
High Voltage is read out.<br>
<br>
Scaler readouts now have 1 second coverage and are spaced by a minimum
of 40,000,000 + 100 clock ticks to avoid duplication of values.<br>
</font>
<br>
<h2 style="font-weight: bold;"><a name="triggering"></a>SPE AND
CALIBRATION TRIGGERS
(Heartbeat/Beacon, Pulser, Flasher
Issues):</h2>
Triggers can occur in the DOM both due to PMT signals, and the
firing
of a DOM calibration source.&nbsp; In normal operation, both SPE
triggers and periodic, "forced" triggers will be present.&nbsp; The
latter type of event can serve as a so-called "beacon" or "heartbeat"
signal for higher-level DAQ functions downstream.<br>
<br>
The heartbeat rate for the forced triggers is set by the <font
 style="font-size: 11pt;" size="2">DSC_SET_PULSER_RATE message,
below.&nbsp; The default is roughly 1 Hz.&nbsp; So, when you start a
run, you will get hit data at this rate even if high voltage is off.<br>
<br>
When operating the DOM main board front end pulser (FE pulser), or the
DOM flashers, the rate is controlled by the same </font><font
 style="font-size: 11pt;" size="2">DSC_SET_PULSER_RATE </font><font
 style="font-size: 11pt;" size="2">message, and the corresponding
events play the role of heartbeat in lieu of the empty "forced"
triggers that occur in normal data taking.<br>
<br>
Forced triggers are identified as type 1 in the engineering event
format.&nbsp; SPE triggers (including those generated by the FE pulser)
are identified as type 2.&nbsp; For compressed data, the "Trigger Word"
encodes this information (see Joshua Sopher's document <span
 style="color: rgb(255, 0, 0);">[need link]</span>). <span
 style="color: rgb(255, 0, 0);"></span></font><b><br>
</b><br>
<h2><b><a name="messaging"></a>MESSAGING
SPECIFICATIONS</b></h2>
<table style="text-align: left;" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"><b>Size / type key:</b>
      <table style="text-align: left;" border="1" cellpadding="2"
 cellspacing="2">
        <tbody>
          <tr>
            <td
 style="vertical-align: top; text-align: right; font-weight: bold;">B<br>
            </td>
            <td style="vertical-align: top; font-style: italic;">byte<br>
            </td>
          </tr>
          <tr>
            <td
 style="vertical-align: top; text-align: right; font-weight: bold;">S<br>
            </td>
            <td style="vertical-align: top; font-style: italic;">short
(big-endian)</td>
          </tr>
          <tr>
            <td
 style="vertical-align: top; text-align: right; font-weight: bold;">L<br>
            </td>
            <td style="vertical-align: top; font-style: italic;">long
(big-endian)</td>
          </tr>
          <tr>
            <td
 style="vertical-align: top; text-align: right; font-weight: bold;">UB<br>
            </td>
            <td style="vertical-align: top; font-style: italic;">unsigned
byte</td>
          </tr>
          <tr>
            <td
 style="vertical-align: top; text-align: right; font-weight: bold;">US<br>
            </td>
            <td style="vertical-align: top; font-style: italic;">unsigned
short (big-endian)</td>
          </tr>
          <tr>
            <td
 style="vertical-align: top; text-align: right; font-weight: bold;">UL<br>
            </td>
            <td style="vertical-align: top; font-style: italic;">unsigned
long (big-endian)</td>
          </tr>
          <tr>
            <td
 style="vertical-align: top; text-align: right; font-weight: bold;">C<br>
            </td>
            <td style="vertical-align: top; font-style: italic;">variable
length string</td>
          </tr>
        </tbody>
      </table>
      </td>
      <td style="vertical-align: top;"><big><big><big><b>Message</b> = <br>
message header <small><small>(8</small></small></big></big></big> <big><big><big><small><small>bytes)
      </small></small><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + <br>
data
portion <small><small>(0 to 4084 bytes)</small></small></big></big></big><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><b>Message Header Format (8
bytes):</b><br>
      <table border="1" bordercolor="#000000" cellpadding="4"
 cellspacing="0" width="354">
        <col width="42"> <col width="73"> <col width="213"> <thead> <tr
 valign="top">
          <th width="42">
          <p>Size</p>
          </th>
          <th width="73">
          <p>Name</p>
          </th>
          <th width="213">
          <p>Meaning</p>
          </th>
        </tr>
        </thead> <tbody>
          <tr valign="top">
            <td style="font-weight: bold;" width="42">
            <p>B</p>
            </td>
            <td style="font-weight: bold;" width="73">
            <p>mt</p>
            </td>
            <td width="213">
            <p>message subtype (“service”)</p>
            </td>
          </tr>
          <tr valign="top">
            <td style="font-weight: bold;" width="42">
            <p>B</p>
            </td>
            <td style="font-weight: bold;" width="73">
            <p>mst</p>
            </td>
            <td width="213">
            <p>message subtype</p>
            </td>
          </tr>
          <tr valign="top">
            <td style="font-weight: bold;" width="42">
            <p>S<br>
            </p>
            </td>
            <td style="font-weight: bold;" width="73">
            <p>len</p>
            </td>
            <td width="213">
            <p>data portion length in bytes</p>
            </td>
          </tr>
          <tr valign="top">
            <td style="font-weight: bold;" width="42">
            <p>S</p>
            </td>
            <td style="font-weight: bold;" width="73">
            <p><br>
            </p>
            </td>
            <td width="213">
            <p>reserved</p>
            </td>
          </tr>
          <tr valign="top">
            <td style="font-weight: bold;" width="42">
            <p>B</p>
            </td>
            <td style="font-weight: bold;" width="73">
            <p>id</p>
            </td>
            <td width="213">
            <p>message id</p>
            </td>
          </tr>
          <tr valign="top">
            <td style="font-weight: bold;" width="42">
            <p>B</p>
            </td>
            <td style="font-weight: bold;" width="73">
            <p>status</p>
            </td>
            <td width="213">
            <p>message status</p>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      </td>
      <td style="vertical-align: top;"><b>Allowed Message Types:<br>
      </b>
      <table border="1" bordercolor="#000000" cellpadding="4"
 cellspacing="0" width="239">
        <col width="32"> <col width="189"> <thead> <tr valign="top">
          <td width="32">
          <p>Num</p>
          </td>
          <td width="189">
          <p>Name</p>
          </td>
        </tr>
        </thead> <tbody>
          <tr>
            <td sdval="1" sdnum="1033;" valign="bottom" width="32">
            <p>1</p>
            </td>
            <td style="font-weight: bold;" valign="top" width="189">
            <p>MESSAGE_HANDLER</p>
            </td>
          </tr>
          <tr>
            <td sdval="2" sdnum="1033;" valign="bottom" width="32">
            <p>2</p>
            </td>
            <td style="font-weight: bold;" valign="top" width="189">
            <p>DOM_SLOW_CONTROL</p>
            </td>
          </tr>
          <tr>
            <td sdval="3" sdnum="1033;" valign="bottom" width="32">
            <p>3</p>
            </td>
            <td style="font-weight: bold;" valign="top" width="189">
            <p>DATA_ACCESS</p>
            </td>
          </tr>
          <tr>
            <td sdval="4" sdnum="1033;" valign="bottom" width="32">
            <p>4</p>
            </td>
            <td style="font-weight: bold;" valign="top" width="189">
            <p>EXPERIMENT_CONTROL</p>
            </td>
          </tr>
          <tr>
            <td sdval="5" sdnum="1033;" valign="bottom" width="32">
            <p>5</p>
            </td>
            <td style="font-weight: bold;" valign="top" width="189">
            <p>TEST_MANAGER</p>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
For valid subtypes, see "<a href="#messagesdescribedindetail">MESSAGES
DESCRIBED IN DETAIL</a>," below.<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<b><br>
</b>
<h2><b><a name="dataformats"></a>DATA FORMATS and Compression Modes</b></h2>
<p style="margin-bottom: 0in;">Data formats and compression modes have
separate settings because one compression mode may have multiple
formats, and one format could support multiple compression modes
(although this is not implemented yet in domapp).<br>
<br>
<b>Compression Modes
(<a href="#DATA_ACC_SET_COMP_MODE">DATA_ACC_SET_COMP_MODE</a>)<br>
</b></p>
<table style="text-align: left;" border="1" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; font-weight: bold; text-align: center;">Mode</td>
      <td style="vertical-align: top; font-weight: bold;">Description<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">0<br>
      </td>
      <td style="vertical-align: top;">None (DEFAULT)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">1<br>
      </td>
      <td style="vertical-align: top;">Road grader FPGA-based
compression algorithm<br>
      </td>
    </tr>
    <tr>
      <td
 style="vertical-align: top; text-align: center; color: rgb(153, 153, 153);">2<br>
      </td>
      <td style="vertical-align: top; color: rgb(153, 153, 153);">Both
uncompressed and type-1
compressed (NOT YET IMPLEMENTED)<br>
      </td>
    </tr>
  </tbody>
</table>
<p style="margin-bottom: 0in;">At the moment there is one compression
mode available.&nbsp; Other data compression methods
(wavelets, software compression) may be available at a later date.<br>
<b><br>
Data Formats (<a href="#DATA_ACC_SET_DATA_FORMAT">DATA_ACC_SET_DATA_FORMAT</a>)<br>
</b></p>
<table style="text-align: left;" border="1" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; font-weight: bold; text-align: center;">Format<br>
      </td>
      <td style="vertical-align: top; font-weight: bold;">Description<br>
      </td>
      <td style="vertical-align: top; font-weight: bold;">Allowed
compression&nbsp; modes<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">0<br>
      </td>
      <td style="vertical-align: top;">Engineering format (DEFAULT)<br>
      </td>
      <td style="vertical-align: top;">0<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">1<br>
      </td>
      <td style="vertical-align: top;">Road grader default format<br>
      </td>
      <td style="vertical-align: top;">1<br>
      </td>
    </tr>
    <tr>
      <td
 style="vertical-align: top; text-align: center; color: rgb(153, 153, 153);">2<br>
      </td>
      <td style="vertical-align: top; color: rgb(153, 153, 153);">Raw
(formatted directly as comes
out of the FPGA, uncompressed)</td>
      <td style="vertical-align: top; color: rgb(153, 153, 153);">0, 1,
2 (NOT YET IMPLEMENTED)<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
Currently, the only supported valid settings are: compression mode 0,
data format 0 and compression mode 1, data format 1, but other
combinations are planned for later releases.<br>
<br>
The Engineering Format (Format 0) is <a
 href="http://docushare.icecube.wisc.edu/docushare/dsweb/Get/Document-3144/DOMdatafmtbinary_1_5.pdf">described
in detail</a> in a document in <a
 href="http://docushare.icecube.wisc.edu/docushare/dsweb/View/Collection-517">the
DOM Data Formats directory</a> on Docushare.&nbsp; Variable/truncated
engineering records are still supported via the <span
 style="font-family: monospace;">DATA_ACC_SET_ENG_FMT</span> message.<br>
<br>
<big><span style="font-weight: bold;">Road Grader Compressed Format</span></big><br>
<br>
The "road grader default format" consists of blocks of data in the
following block data format:<br>
<br>
<span
 style="font-family: helvetica,arial,sans-serif; font-weight: bold;">BLOCK
DATA:</span><br>
<table style="text-align: left;" border="0" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td colspan="1" rowspan="1" style="vertical-align: top;"><span
 style="font-family: helvetica,arial,sans-serif;">HEADER:</span>
      <table style="width: 100%; text-align: left;" border="1"
 cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td colspan="1" rowspan="1" style="vertical-align: top;"><span
 style="font-weight: bold;">Block length</span> in bytes (including
header): (16 bits, BIG ENDIAN)</td>
          </tr>
          <tr>
            <td colspan="1" rowspan="1" style="vertical-align: top;"><span
 style="font-weight: bold;">Timestamp MSBs</span> of all hits in block:
(16 bits, BIG ENDIAN)</td>
          </tr>
        </tbody>
      </table>
      <span style="font-family: courier new,courier,monospace;"><span
 style="font-weight: bold;"></span></span><span
 style="font-family: courier new,courier,monospace;"><span
 style="font-weight: bold;"></span></span><span
 style="font-family: courier new,courier,monospace;"><span
 style="font-weight: bold;"></span></span><br
 style="font-family: courier new,courier,monospace;">
      <span style="font-family: courier new,courier,monospace;"><span
 style="font-weight: bold;"></span></span></td>
    </tr>
    <tr>
    </tr>
    <tr>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span
 style="font-family: courier new,courier,monospace;"><big><small><span
 style="font-family: helvetica,arial,sans-serif;">HITS</span></small></big></span>:
      <table style="width: 100%; text-align: left;" border="1"
 cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top;">Hit 0&nbsp; (variable
length)<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">Hit 1 <br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">...<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">Hit <span
 style="font-style: italic;">N</span><br>
            </td>
          </tr>
        </tbody>
      </table>
      <span style="font-family: courier new,courier,monospace;"></span><span
 style="font-family: courier new,courier,monospace;"><br>
      </span></td>
    </tr>
  </tbody>
</table>
<br>
Each of the concatenated "Hits" in the block conforms to "RoadGrader
Compression Format" in the <a
 href="http://docushare.icecube.wisc.edu/docushare/dsweb/View/Collection-2465">DOM
Firmware Directory</a> on DocuShare, except that Header WORD0 is
removed.&nbsp; In particular, the <span style="font-weight: bold;">hit
length</span> is encoded in bits 10..0
of WORD1 (the first 11 bits of Hit <span style="font-style: italic;">x</span>,
above).&nbsp; Header data (e.g., timestamps) in the HITS records are
LITTLE ENDIAN per Joshua Sopher's <a
 href="http://docushare.icecube.wisc.edu/docushare/dsweb/Get/Document-16116/Road+Grader+Data+Format+And+Processes.pdf">compression
document</a>, whereas the
header values (as well as all the data created by domapp) are BIG
ENDIAN by convention.<br>
<br>
Block length, including all hits, will be less than or equal to 4084
bytes.&nbsp; The Most Significant Bits (MSBs) of the hit timestamps are
the
same in every block (resulting in the occasional block which has fewer
than the average number of hits, when the 16 LSBs of the DOM timestamp
roll over
every ~2 minutes).&nbsp; The least significant bits of the timestamps
are encoded in the hits themselves.<br>
<br>
<h2><a name="supernova"></a><span style="font-weight: bold;">SUPERNOVA
DATA</span></h2>
The supernova data consist of a running tally of SPE or MPE triggers
in a fixed 1.6384 millisecond (65536 counts of the 40 MHz clock)
window.&nbsp; The <a href="#DSC_ENABLE_SN">DSC_ENABLE_SN</a> message
lets you select SPE (0) or MPE (1) triggers as the basis of the data
collection.&nbsp; The programmable dead time argument to DSC_ENABLE_SN
causes the data collection to be disabled for a short period following
a trigger (to screen out PMT afterpulsing, for example).<br>
<br>
The data are read out via the <font style="font-size: 11pt;" size="2"><a
 href="#DATA_ACC_GET_SN_DATA">DATA_ACC_GET_SN_DATA</a> </font>message
in the following block format:<br>
<br>
<table style="text-align: left;" border="1" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">US<br>
      </td>
      <td style="vertical-align: top;">block length<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">UB*6<br>
      </td>
      <td style="vertical-align: top;">complete time stamp of time
slice 0<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">UB<br>
      </td>
      <td style="vertical-align: top;">trigger count for time slice 0<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">UB<br>
      </td>
      <td style="vertical-align: top;">trigger count for time slice 1<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">...<br>
      </td>
      <td style="vertical-align: top;">...<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">UB<br>
      </td>
      <td style="vertical-align: top;">trigger count for time slice <span
 style="font-style: italic;">N-1</span><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
In general, the timestamps for successive events are separated by 65536
clock counts.&nbsp; The block will be populated until this condition
fails or the maximum block size (4084 B) is reached, which ever comes
first.<br>
<br>
The trigger counters range from 0..15.&nbsp; Currently 15 is the
maximum value, indicating that 15 <span style="font-weight: bold;">or
more</span> pulses occurred.<br>
<br>
Roughly 10 seconds of data are buffered in the HAL (per Arthur Jones, <span
 style="font-style: italic; color: rgb(255, 0, 0);">need link</span>).&nbsp;
If the reply to the <font style="font-size: 11pt;" size="2">DATA_ACC_GET_SN_DATA
message has a message length of zero, no data are available to be read
out.</font><br>
<br>
<h2><a name="flasher"></a><span style="font-weight: bold;">RUN MODES
AND
FLASHER FUNCTIONALITY</span></h2>
Currently there are two run modes in domapp: "normal" mode and flasher
mode.&nbsp; In normal mode one first sets up high voltage and other DAC
settings, then configures the FPGA for triggering on PMT pulses via <font
 size="3"><span style="color: rgb(153, 153, 153);"><a
 href="api.html#EXPCONTROL_BEGIN_RUN">EXPCONTROL_BEGIN_RUN</a></span></font>.
Flasher mode, invoked with <font size="3"><span
 style="color: rgb(153, 153, 153);"><a
 href="api.html#EXPCONTROL_BEGIN_FB_RUN">EXPCONTROL_BEGIN_FB_RUN</a></span></font>,
is similar to normal mode (much of the code is shared), except HV must
be off and there are several <a href="api.html#EXPCONTROL_BEGIN_FB_RUN">parameters</a>
to be set.&nbsp; One of these parameters, "mask," is a bit mask
specifying which LEDs to flash (ref. John Kelley's documentation, <span
 style="color: rgb(255, 0, 0); font-style: italic;">need link</span>).&nbsp;
Rather than digitizing PMT pulses, the current of the first LED
specified in the mask is digitized.<br>
<font size="3"><span style="color: rgb(153, 153, 153);"></span></font><br>
<font size="3"><span style="color: rgb(153, 153, 153);"><a
 href="api.html#EXPCONTROL_END_RUN">EXPCONTROL_END_RUN</a><span
 style="color: rgb(0, 0, 0);"> and </span></span></font><font size="3"><span
 style="color: rgb(153, 153, 153);"><a
 href="api.html#EXPCONTROL_END_FB_RUN">EXPCONTROL_END_FB_RUN</a></span></font><font
 size="3"><span style="color: rgb(153, 153, 153);"><span
 style="color: rgb(0, 0, 0);"> now have the same function and can be
used interchangeably.<br>
<br>
</span></span></font>See the data taking <a href="api.html#procedure">outline</a>,
above, for a complete summary of the procedure.<br>
<font size="3"><span style="color: rgb(153, 153, 153);"><span
 style="color: rgb(0, 0, 0);"><br>
</span></span></font><font size="3"><span
 style="color: rgb(153, 153, 153);"><span style="color: rgb(0, 0, 0);"></span></span></font><font
 size="3"><span style="color: rgb(153, 153, 153);"></span></font>
<h2><b><a name="messagesdescribedindetail"></a>MESSAGES
DESCRIBED IN DETAIL<br>
</b></h2>
The following tables describe the
format of messages broken down by type and subtype. <br>
<b><font size="4"><br>
Message Handler Messages </font> (message type 1):</b>
<br>
<br>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="20"> <col width="251"> <col width="130"> <col
 width="24"> <col width="110"> <thead> <tr valign="top">
    <th width="20">
    <p style="">ID</p>
    </th>
    <th width="251">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th colspan="2" width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="10" sdnum="1033;" width="20">
      <p style="" align="center"> 10</p>
      </td>
      <td width="251">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">MSGHAND_GET_DOM_ID</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="24">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UL</font></p>
      </td>
      <td valign="top" width="110">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">dom id</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Fetch
DOM ID
from DOM</b></font></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p style="margin-bottom: 0in;">
<br>
</p>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="20"> <col width="251"> <col width="130"> <col
 width="24"> <col width="110"> <thead
 style="color: rgb(153, 153, 153);"> <tr valign="top">
    <th width="20">
    <p style="">ID</p>
    </th>
    <th width="251">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th colspan="2" width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr style="color: rgb(153, 153, 153);">
      <td sdval="11" sdnum="1033;" width="20">
      <p style="" align="center"> 11</p>
      </td>
      <td width="251">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">MSGHAND_GET_DOM_NAME</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="24">
      <p style=""><font style="font-size: 9pt;" size="2">S</font></p>
      </td>
      <td valign="top" width="110">
      <p style=""><font style="font-size: 9pt;" size="2">name string</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b><span
 style="color: rgb(153, 153, 153);">Get ASCII
representation of DOM name (e.g., “Linguine”; currently not supported
by HAL)</span><br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p style="margin-bottom: 0in;">
<br>
</p>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="27"> <col width="95">
  <col width="24"> <col width="110"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th colspan="2" width="130">
    <p style="">Input</p>
    </th>
    <th colspan="2" width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="18" sdnum="1033;" width="28">
      <p style="" align="center"> 18</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">MSGHAND_ECHO_MSG</font></p>
      </td>
      <td valign="top" width="27">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">S</font></p>
      </td>
      <td valign="top" width="95">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">data sent</font></p>
      </td>
      <td valign="top" width="24">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">S</font></p>
      </td>
      <td valign="top" width="110">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">data receive<span style="font-weight: bold;">d</span></font></p>
      </td>
    </tr>
    <tr>
      <td colspan="6" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Echoes
the
sent data; useful for testing purposes</b></font></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p style="margin-bottom: 0in;"><br>
</p>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="28"> <col width="94">
  <col width="24"> <col width="110"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th colspan="2" width="130">
    <p style="">Input</p>
    </th>
    <th colspan="2" width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td rowspan="4" sdval="20" sdnum="1033;" width="28">
      <p style="" align="center"> 20</p>
      </td>
      <td rowspan="4" width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">MSGHAND_ACCESS_MEMORY_CONTENTS</font></p>
      </td>
      <td valign="top" width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UB</font></p>
      </td>
      <td valign="top" width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">0=byte, 1=long</font></p>
      </td>
      <td rowspan="4" valign="top" width="24">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">S</font></p>
      </td>
      <td rowspan="4" valign="top" width="110">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">actual bytes
or longs read</font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UB</font></p>
      </td>
      <td width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">0=read, 1=write</font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">US</font></p>
      </td>
      <td width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2"># of accesses</font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UL</font></p>
      </td>
      <td width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">address</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="6" width="566"> <font style="font-size: 11pt;"
 size="2"><b>Peek or poke
DOM memory; “address” is in DOM Application mode</b></font> </td>
    </tr>
  </tbody>
</table>
</center>
<p style="margin-bottom: 0in;"><br>
</p>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="264"> <col width="108"> <col
 width="24"> <col width="110"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="264">
    <p style="">Subtype</p>
    </th>
    <th width="108">
    <p style="">Input</p>
    </th>
    <th colspan="2" width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="24" sdnum="1033;" width="28">
      <p style="" align="right"> 24</p>
      </td>
      <td width="264">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">MSGHAND_GET_DOMAPP_RELEASE</font></p>
      </td>
      <td valign="top" width="108">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="24">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">S</font></p>
      </td>
      <td valign="top" width="110">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">domapp release</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566"> <font style="font-size: 11pt;"
 size="2"><b>Returns
DOMApp release version string as it was delivered to BFD, <br>
e.g., “V02-01-10”</b></font> </td>
    </tr>
  </tbody>
</table>
</center>
<br>
<p style="margin-bottom: 0in; page-break-before: always;"><b><font
 size="4">Slow Control Messages </font> (message type 2):</b></p>
<p style="margin-bottom: 0in;">
</p>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">13</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_WRITE_ONE_DAC&nbsp; <br>
      </font></p>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">whichDAC<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">blank<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">value<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Write "value"
to DAC numbered "whichDAC"</span> </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_PMT_HV"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">14</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_PMT_HV&nbsp; <br>
      </font></p>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">value<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Set PMT high
voltage to "value" (DAC units, i.e. volts * 2) (must also
DSC_ENABLE_PMT_HV)</span> </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_ENABLE_PMT_HV"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">16</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_ENABLE_PMT_HV&nbsp; <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Enable PMT
High Voltage</span> </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_DISABLE_PMT_HV"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">18</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_DISABLE_PMT_HV&nbsp; <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Disable PMT
High Voltage</span> </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_QUERY_PMT_HV"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">22<br>
      </p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_QUERY_PMT_HV&nbsp; <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">value<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left">&nbsp; <span style="font-weight: bold;">Read PMT
voltage into "value" (DAC/ADC units, i.e. volts * 2)</span> </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_TRIG_MODE"></a><br>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="27"> <col width="95">
  <col width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th colspan="2" width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center"> 31</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_TRIG_MODE</font></p>
      </td>
      <td valign="top" width="27">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UB</font></p>
      </td>
      <td valign="top" width="95">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">mode</font></p>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566">
      <p align="left"> <font style="font-size: 11pt;" size="2"><b>Modes:<br>
0 = test pattern data<br>
1 = CPU triggers<br>
2 = discriminator triggers<br>
3 = flasher board runs; digitize flasher board LED current</b></font></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p style="margin-bottom: 0in;">
</p>
<a name="DSC_MUX_SELECT"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">35&nbsp;&nbsp; <br>
      </p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_MUX_SELECT <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">value<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> </p>
      <div style="text-align: center;">-<br>
      </div>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left">&nbsp; <span style="font-weight: bold;">Selects
analog mux channel.&nbsp; Use 255 (0xFF) to disable analog mux
explicitly.</span> </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">37</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_PULSER_RATE&nbsp; <br>
      </font></p>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">rate<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Set pulser
rate to &lt;rate&gt; (Hz).&nbsp; IMPORTANT NOTE: this is the rate used
both
for the on-board front-end pulser during calibration operations, as
well as for the generation heartbeat, "forced" triggers .&nbsp; Another
note: only scaled powers of two are actually used; the HAL rounds the
requested value to the nearest appropriate value.&nbsp; </span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">38</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_GET_PULSER_RATE&nbsp; <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">rate<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Get
pulser&nbsp; &lt;rate&gt; (Hz).&nbsp; See DSC_SET_PULSER_RATE.&nbsp;
Actual rate may be slightly lower because of rounding in the HAL.</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">39</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_PULSER_ON&nbsp; <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Enable
on-board pulser.&nbsp; Note that this changes the trigger configuration
so that heartbeat events are NOT generated.&nbsp; Pulser is
automatically disabled at the beginning of a run, so this message must
be sent AFTER the run has started (<a href="#EXPCONTROL_BEGIN_RUN">EXPCONTROL_BEGIN_RUN</a>).</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">40</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_PULSER_OFF&nbsp; <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Disable
on-board pulser.</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<center>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">43</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_SCALER_DEADTIME <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UL:<br>
            </td>
            <td style="vertical-align: top;">deadtime<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Set scaler
deadtime in nsec.&nbsp; Valid range: 100 nsec - 102400 nsec</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">44</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_GET_SCALER_DEADTIME <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">deadtime<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Get scaler
deadtime</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_LOCAL_COIN_MODE"></a><br>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="27"> <col width="95">
  <col width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th colspan="2" width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="45" sdnum="1033;" width="28">
      <p style="" align="center"> 45</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DSC_SET_LOCAL_COIN_MODE</font></p>
      </td>
      <td valign="top" width="27">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UB</font></p>
      </td>
      <td valign="top" width="95">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">mode</font></p>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Modes:<br>
0 = no local coincidence required<br>
1 = require local coincidence; enable receive from both UPPER and LOWER
DOMs<br>
2 = require local coincidence; enable receive from UPPER DOM only<br>
3 = require local coincidence; enable receive from LOWER DOM only</b></font></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<br>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="24"> <col width="110"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th colspan="2" width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="46" sdnum="1033;" width="28">
      <p style="" align="center"> 46</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DSC_GET_LOCAL_COIN_MODE</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="24">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UB</font></p>
      </td>
      <td valign="top" width="110">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">data received</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566"> <font style="font-size: 11pt;"
 size="2"><b>Modes: see <span style="font-style: normal;"><a
 href="#DSC_SET_LOCAL_COIN_MODE">DSC_SET_LOCAL_COIN_MODE</a>.</span></b></font>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_LOCAL_COIN_WINDOW"></a><br>
</center>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="28"> <col width="94">
  <col width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th colspan="2" width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td rowspan="2" sdval="47" sdnum="1033;" width="28">
      <p style="" align="right"> 47</p>
      </td>
      <td rowspan="2" width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DSC_SET_LOCAL_COIN_WINDOW</font></p>
      </td>
      <td valign="top" width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UL</font></p>
      </td>
      <td valign="top" width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">up_pre</font></p>
      </td>
      <td rowspan="2" valign="top" width="142">
      <div style="text-align: center;">-</div>
      </td>
    </tr>
    <tr valign="top">
      <td width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UL</font></p>
      </td>
      <td width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">up_post</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566"> <font style="font-size: 11pt;"
 size="2"><b>Set local
coincidence windows. Units are nsec. Must be between 100 and 6200 nsec
inclusive.&nbsp; Default is 200 nsec on each side.&nbsp;&nbsp; Pre- and
post- refer to
before and after the ATWD launch window, respectively (ask Thorsten
Stezelberger for details).</b></font> </td>
    </tr>
  </tbody>
</table>
</center>
<br>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="24"> <col width="109"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th colspan="2" width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td rowspan="2" sdval="48" sdnum="1033;" width="28">
      <p style="" align="right"> 48</p>
      </td>
      <td rowspan="2" width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DSC_GET_LOCAL_COIN_WINDOW</font></p>
      </td>
      <td rowspan="2" valign="top" width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="24">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UL</font></p>
      </td>
      <td valign="top" width="109">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">up_pre</font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="24">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UL</font></p>
      </td>
      <td width="109">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">up_post</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566"> <font style="font-size: 11pt;"
 size="2"><b>Get local
coincidence windows.&nbsp;</b></font> </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_LC_TYPE"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">49<br>
      </p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_LC_TYPE <br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">type<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Set local
coincidence type: 1=soft, 2=hard (DEFAULT), 3=flabby</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">50</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_GET_LC_TYPE </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">type<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Get LC type</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_LC_TX"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">51</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_LC_TX </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">type<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566"><span style="font-weight: bold;">Set
local coincidence transmit mode: 0=no transmit, 1=TX down only, 2=TX up
only, 3=TX both up and down (DEFAULT)</span></td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">52</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_GET_LC_TX</font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">type<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">G</span><span
 style="font-weight: bold;">et local coincidence transmit mode</span> </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_LC_SRC"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">53</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_LC_SRC<br>
      </font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">type<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Set local
coincidence source 0=SPE (DEFAULT), 1=MPE</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">54</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_GET_LC_SRC</font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">type<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Get local
coincidence source</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_LC_SPAN"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">55</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_LC_SPAN</font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">type<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Set local
coincidence span: range 1..4 (DEFAULT: 1)</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">56</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_GET_LC_SPAN</font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">type<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Get local
coincidence span</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_SET_LC_CABLE_LEN"></a><br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">57</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_SET_LC_CABLE_LEN</font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">UP n0 len.<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">UP n1 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">UP n2 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">UP n3 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">DN n0 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">DN n1 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">DN n2 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">DN n3 len.</td>
          </tr>
        </tbody>
      </table>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Set local
coincidence cable lengths, UP and DowN, for neighbors 0..3.&nbsp;
Length &lt; 3175.</span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table
 style="width: 576px; page-break-before: auto; text-align: left; margin-left: auto; margin-right: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th style="width: 28px; vertical-align: middle; text-align: center;">
    <p style="">ID</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="text-align: center; vertical-align: middle;" colspan="1"
 width="130">
    <p style="">Input</p>
    </th>
    <th
 style="width: 142px; vertical-align: middle; text-align: center;">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="31" sdnum="1033;" width="28">
      <p style="" align="center">58</p>
      </td>
      <td width="242">
      <p style="font-style: normal;" align="center"> <font
 style="font-size: 11pt;" size="2">DSC_GET_LC_CABLE_LEN</font></p>
      </td>
      <td style="text-align: center;" colspan="1" rowspan="1"
 valign="top" width="27">-<br>
      </td>
      <td colspan="1" rowspan="1" valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">UP n0 len.<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:<br>
            </td>
            <td style="vertical-align: top;">UP n1 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">UP n2 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">UP n3 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">DN n0 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">DN n1 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">DN n2 len.</td>
          </tr>
          <tr>
            <td style="vertical-align: top;">US:</td>
            <td style="vertical-align: top;">DN n3 len.</td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p align="left"> <span style="font-weight: bold;">Get local
coincidence cable lengths.&nbsp; <span style="color: rgb(255, 0, 0);">Must
DSC_GET_LC_CABLE_LEN first or this message will return an error!</span></span><br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_ENABLE_SN"></a><br>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right"> 59</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DSC_ENABLE_SN<i><b> <br>
      </b></i></font></p>
      </td>
      <td valign="top" width="130">
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UL:<br>
            </td>
            <td style="vertical-align: top;">deadtime<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">mode<br>
            </td>
          </tr>
        </tbody>
      </table>
      <p style="" align="center"> </p>
      </td>
      <td style="text-align: center;" valign="top" width="142"> -<br>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Enable
supernova data collection (fine-grained trigger rate meter).&nbsp;
Deadtime (enforced period of inactivity after each trigger) is in units
of nsec.&nbsp; Valid values are 6400 to 512000 inclusive.&nbsp; Mode is
0 (SPE) or 1 (MPE).</b></font><font style="font-size: 11pt;" size="2"><b>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DSC_DISABLE_SN"></a><br>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right"> 60</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DSC_DISABLE_SN<i><b> <br>
      </b></i></font></p>
      </td>
      <td valign="top" width="130">
      <div style="text-align: center;">-<br>
      </div>
      <p style="" align="center"> </p>
      </td>
      <td style="text-align: center;" valign="top" width="142"> -<br>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Disable
supernova data collection.</b></font><font style="font-size: 11pt;"
 size="2"><b> </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<br>
</center>
<p style="margin-bottom: 0in;">
<b><font size="4"><br>
Data Access Messages</font> (message type 3):<br>
<a name="DATA_ACC_GET_DATA"></a><br>
</b></p>
<div style="text-align: center;">
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right"> 11</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_GET_DATA&nbsp;<i><b> <br>
      </b></i></font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> -<br>
      </p>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UB*N</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Read
out
hit data buffered by FPGA (must do <a href="#EXPCONTROL_BEGIN_RUN">EXPCONTROL_BEGIN_RUN</a>
first)</b></font><font style="font-size: 11pt;" size="2"><b> </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DATA_ACC_GET_NEXT_MONI_REC"></a><br>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right"> 12</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_GET_NEXT_MONI_REC&nbsp;<i><b> <br>
      </b></i></font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> -<br>
      </p>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UB*N</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Read
out
monitoring data <br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right"> 13</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_SET_MONI_IVAL <i><b><br>
      </b></i></font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UL:<br>
            </td>
            <td colspan="1" rowspan="1" style="vertical-align: top;">HW_Ival<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">UL:<br>
            </td>
            <td colspan="1" rowspan="1" style="vertical-align: top;">SW_Ival<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Set
monitoring intervals.&nbsp; Times are in CPU clock ticks (40,000,000
ticks/sec).&nbsp; HW_Ival is time between hardware records.&nbsp;
SW_Ival is time between software config. records.<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DATA_ACC_SET_BASELINE_THRESHOLD"></a><br>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right"> 16</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_SET_BASELINE_THRESHOLD<i><b><br>
      </b></i></font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: middle;">US<br>
            </td>
            <td colspan="1" rowspan="1" style="vertical-align: top;">FADC
baseline threshold<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US<br>
            </td>
            <td colspan="1" rowspan="1" style="vertical-align: top;">baseline
threshold, ATWD0 ch 0<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US<br>
            </td>
            <td style="vertical-align: top;">ATWD0 ch 1<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD0 ch 2<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD0 ch 3<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD1 ch 0<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD1 ch 1</td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD1 ch 2<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD1 ch 3<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Set
baseline / RoadGrader threshold for hardware data compression (ATWD
units).&nbsp; Must also do <a href="#EXPCONTROL_DO_PEDESTAL_COLLECTION">EXPCONTROL_DO_PEDESTAL_COLLECTION</a>.<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right"> 17</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_GET_BASELINE_THRESHOLD<i><b><br>
      </b></i></font></p>
      </td>
      <td width="130">
      <p style="" align="center"> </p>
      <div style="text-align: center;">-<br>
      </div>
      </td>
      <td width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: middle;">US<br>
            </td>
            <td colspan="1" rowspan="1" style="vertical-align: top;">FADC
baseline threshold<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US<br>
            </td>
            <td colspan="1" rowspan="1" style="vertical-align: top;">baseline
threshold, ATWD0 ch 0<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US<br>
            </td>
            <td style="vertical-align: top;">ATWD0 ch 1<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD0 ch 2<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD0 ch 3<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD1 ch 0<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD1 ch 1</td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD1 ch 2<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: middle;">US</td>
            <td style="vertical-align: top;">ATWD1 ch 3<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <span style="font-weight: bold;">Fetch
      </span><font style="font-size: 11pt;" size="2"><b>baseline /
RoadGrader threshold for hardware data compression (ATWD units).&nbsp;
Must also do <a href="api.html#EXPCONTROL_DO_PEDESTAL_COLLECTION">EXPCONTROL_DO_PEDESTAL_COLLECTION</a>.<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
</center>
</div>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="34"> <col width="100"> <thead> <tr valign="top">
    <th width="28">
    <p style=""><br>
    </p>
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th colspan="2" width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="23" sdnum="1033;" width="28">
      <p style="" align="right"> 23</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_GET_FB_SERIAL</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="34">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">UB*N </font> </p>
      </td>
      <td valign="top" width="100">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">Flasher board
ID</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Get
flasher
board ID string (currently 27 bytes, but check message data length)</b></font></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p style="margin-bottom: 0in;">
</p>
<a name="DATA_ACC_SET_DATA_FORMAT"></a><br>
<table
 style="width: 576px; text-align: left; margin-left: auto; margin-right: auto; page-break-before: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th style="text-align: center;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="width: 130px; text-align: center;">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="text-align: center;">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right">24<br>
      </p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_SET_DATA_FORMAT</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">fmtMode<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4"
 style="width: 566px; vertical-align: middle; text-align: center;">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Set
data format (see table in "<a href="#dataformats">DATA FORMATS</a>",
above).<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<p style="margin-bottom: 0in; page-break-before: always;"><br>
</p>
<table
 style="width: 576px; text-align: left; margin-left: auto; margin-right: auto; page-break-before: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th style="text-align: center;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="width: 130px; text-align: center;">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="text-align: center;">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right">25<br>
      </p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_GET_DATA_FORMAT</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <div style="text-align: center;">-<br>
      </div>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">fmtMode<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4"
 style="width: 566px; vertical-align: middle; text-align: center;">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Get
data format.<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<p style="margin-bottom: 0in; page-break-before: always;"><a
 name="DATA_ACC_SET_COMP_MODE"></a><br>
</p>
<table
 style="width: 576px; text-align: left; margin-left: auto; margin-right: auto; page-break-before: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th style="text-align: center;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="width: 130px; text-align: center;">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="text-align: center;">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right">26<br>
      </p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_SET_COMP_MODE</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">compMode<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4"
 style="width: 566px; vertical-align: middle; text-align: center;">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Set
data compression mode (see table in "<a href="#dataformats">DATA FORMATS</a>",
above).<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<p style="margin-bottom: 0in; page-break-before: always;"><br>
</p>
<table
 style="width: 576px; text-align: left; margin-left: auto; margin-right: auto; page-break-before: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th style="text-align: center;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="width: 130px; text-align: center;">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="text-align: center;">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right">27<br>
      </p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_GET_COMP_MODE</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <div style="text-align: center;">-<br>
      </div>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">compMode<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4"
 style="width: 566px; vertical-align: middle; text-align: center;">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Get
data compression mode.<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DATA_ACC_GET_SN_DATA"></a><br>
<table
 style="width: 576px; text-align: left; margin-left: auto; margin-right: auto; page-break-before: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th style="text-align: center;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="width: 130px; text-align: center;">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="text-align: center;">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right">28<br>
      </p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_GET_SN_DATA</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <div style="text-align: center;">-<br>
      </div>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> </p>
      <div style="text-align: center;">UL*N: data<br>
      </div>
      </td>
    </tr>
    <tr>
      <td colspan="4"
 style="width: 566px; vertical-align: middle; text-align: center;">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Fetch
supernova data.&nbsp; </b></font><font style="font-size: 11pt;"
 size="2"><b>The data are in the form of 32 bit words described</b></font><font
 style="font-size: 11pt;" size="2"><b> in the <a href="#supernova">supernova
data</a> section, above.&nbsp; <br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DATA_ACC_RESET_MONI_BUF"></a><br>
<table
 style="width: 576px; text-align: left; margin-left: auto; margin-right: auto; page-break-before: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th style="text-align: center;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="width: 130px; text-align: center;">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="text-align: center;">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right">29<br>
      </p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_RESET_MONI_BUF</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <div style="text-align: center;">-<br>
      </div>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> </p>
      <div style="text-align: center;">-<br>
      </div>
      </td>
    </tr>
    <tr>
      <td colspan="4"
 style="width: 566px; vertical-align: middle; text-align: center;">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Reset
monitoring buffer, eliminating any existing monitoring records<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<a name="DATA_ACC_MONI_AVAIL"></a><br>
<table
 style="width: 576px; text-align: left; margin-left: auto; margin-right: auto; page-break-before: auto;"
 border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
  <thead><tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th style="text-align: center;" width="242">
    <p style="">Subtype</p>
    </th>
    <th style="width: 130px; text-align: center;">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="text-align: center;">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="22" sdnum="1033;" width="28">
      <p style="" align="right">30<br>
      </p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">DATA_ACC_MONI_AVAIL</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> </p>
      <div style="text-align: center;">-<br>
      </div>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; height: 100%;" border="0"
 bordercolor="#000000" cellpadding="4" cellspacing="0">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UB:<br>
            </td>
            <td style="vertical-align: top;">haveData<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4"
 style="width: 566px; vertical-align: middle; text-align: center;">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Return
1 if any monitoring records are available, else 0<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<p style="margin-bottom: 0in; page-break-before: always;"><b><font
 size="4">Experiment Control Messages</font> (message type 4):</b></p>
<p style="margin-bottom: 0in;">
<a name="EXPCONTROL_BEGIN_RUN"></a><br>
</p>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="12" sdnum="1033;" width="28">
      <p style="" align="center"> 12</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">EXPCONTROL_BEGIN_RUN</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Start
“background” data taking</b></font></p>
      <p style="" align="left"> </p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p style=""><a name="EXPCONTROL_END_RUN"></a><br>
</p>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="13" sdnum="1033;" width="28">
      <p style="" align="center"> 13</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">EXPCONTROL_END_RUN</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <font style="font-size: 11pt;" size="2"><b>Stop
“background” data taking.&nbsp; This now works for both flasher runs
and "regular" runs<br>
      </b></font></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<br>
<a name="EXPCONTROL_DO_PEDESTAL_COLLECTION"></a><br>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="13" sdnum="1033;" width="28"> 16<br>
      </td>
      <td width="242">EXPCONTROL_DO_PEDESTAL_COLLECTION<br>
      </td>
      <td width="130">
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UL<br>
            </td>
            <td style="vertical-align: top;">#ATWD0<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">UL<br>
            </td>
            <td style="vertical-align: top;">#ATWD1<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">UL<br>
            </td>
            <td style="vertical-align: top;">#FADC<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td width="142">
      <p style="" align="center"> -<br>
      </p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <span style="font-weight: bold;">Collects
requested number of pedestal events.&nbsp; Make sure pedestals have
been collected before starting a run in which RoadGrader compression is
used.&nbsp; Arguments are number of triggers to collect for each ATWD
and the FADC (max: 1000 for ATWDs, 2000 for FADC).&nbsp; Message reply
is sent when pedestals
are collected.&nbsp; NOTE: #FADC must be &lt;= #ATWD0 + #ATWD1.<br>
      </span></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<a name="EXPCONTROL_GET_NUM_PEDESTALS"></a><br>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="13" sdnum="1033;" width="28">
      <p style="" align="center">19<br>
      </p>
      </td>
      <td width="242">EXPCONTROL_GET_NUM_PEDESTALS<br>
      </td>
      <td width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="142">
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top;">UL<br>
            </td>
            <td style="vertical-align: top;">#ATWD0<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">UL<br>
            </td>
            <td style="vertical-align: top;">#ATWD1<br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;">UL<br>
            </td>
            <td style="vertical-align: top;">#FADC<br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566">
      <p style="" align="left"> <span style="font-weight: bold;">Reports
the number of pedestals collected with <a
 href="#EXPCONTROL_DO_PEDESTAL_COLLECTION">EXPCONTROL_DO_PEDESTAL_COLLECTION</a>,
above.</span></p>
      </td>
    </tr>
  </tbody>
</table>
<a name="EXPCONTROL_GET_PEDESTAL_AVERAGES"></a><br>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="13" sdnum="1033;" width="28">
      <p style="" align="center">20<br>
      </p>
      </td>
      <td width="242">EXPCONTROL_GET_PEDESTAL_AVERAGES<br>
      </td>
      <td width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> </p>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top;"><small>US*128<br>
            </small></td>
            <td style="vertical-align: top;"><small>ATWD0 ch 0 pattern<br>
            </small></td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small>US*128</small></td>
            <td style="vertical-align: top;"><small>ATWD0 ch 1 pattern</small></td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small>US*128</small></td>
            <td style="vertical-align: top;"><small>ATWD0 ch 2 pattern</small></td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small>US*128</small></td>
            <td style="vertical-align: top;"><small>ATWD0 ch 3 pattern</small></td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small>US*128</small></td>
            <td style="vertical-align: top;"><small>ATWD1 ch 0 pattern</small></td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small>US*128</small></td>
            <td style="vertical-align: top;"><small>ATWD1 ch 1 pattern</small></td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small>US*128</small></td>
            <td style="vertical-align: top;"><small>ATWD1 ch 2 pattern</small></td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small>US*128</small></td>
            <td style="vertical-align: top;"><small>ATWD1 ch 3 pattern</small></td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small>US*128</small></td>
            <td style="vertical-align: top;"><small>FADC pattern</small></td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr style="font-weight: bold;">
      <td colspan="4" width="566">Collects the average pedestal pattern</td>
    </tr>
  </tbody>
</table>
</center>
</center>
<br>
<a name="EXPCONTROL_BEGIN_FB_RUN"></a><br>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="28"> <col width="94">
  <col width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th colspan="2" width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td rowspan="5" sdval="27" sdnum="1033;" width="28">
      <p style="" align="center"> 27</p>
      </td>
      <td rowspan="5" width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">EXPCONTROL_BEGIN_FB_RUN</font></p>
      </td>
      <td valign="top" width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">US</font></p>
      </td>
      <td valign="top" width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">brightness
(0..127)</font></p>
      </td>
      <td rowspan="5" valign="top" width="142">
      <p style="" align="center"> <br>
      <br>
      </p>
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">US</font></p>
      </td>
      <td width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">window (0..127)</font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">S</font></p>
      </td>
      <td width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">delay (-200..175)</font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">US</font></p>
      </td>
      <td width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">mask</font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="28">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">US</font></p>
      </td>
      <td width="94">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">rate</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="5" width="566">
      <p style="margin-left: 0.35in;" align="left"> <font
 style="font-size: 11pt;" size="2"><b>Starts a
flasher board run. High voltage must be off and no run in progress.
Units for Window are roughly nsec. Delay is time difference between LED
trigger and ATWD launch (nsec). Mask selects which LEDs to flash (bit 0
-&gt; LED 1; bit 11 -&gt; LED 12). Rate is the actual flashing rate in
Hz, max. value 610.</b></font></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p style="margin-bottom: 0in;"><a name="EXPCONTROL_END_FB_RUN"></a><br>
</p>
<center>
<table style="page-break-before: auto;" border="1" bordercolor="#000000"
 cellpadding="4" cellspacing="0" width="576">
  <col width="28"> <col width="242"> <col width="130"> <col
 width="142"> <thead> <tr valign="top">
    <th width="28">
    <p style="">ID</p>
    </th>
    <th width="242">
    <p style="">Subtype</p>
    </th>
    <th width="130">
    <p style="">Input</p>
    </th>
    <th width="142">
    <p style="">Output</p>
    </th>
  </tr>
  </thead> <tbody>
    <tr>
      <td sdval="28" sdnum="1033;" width="28">
      <p style="" align="center"> 28</p>
      </td>
      <td width="242">
      <p style="" align="center"> <font style="font-size: 11pt;"
 size="2">EXPCONTROL_END_FB_RUN</font></p>
      </td>
      <td valign="top" width="130">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
      <td valign="top" width="142">
      <p style="" align="center"> <font style="font-size: 9pt;"
 size="2">-</font></p>
      </td>
    </tr>
    <tr>
      <td colspan="4" width="566"><font style="font-size: 11pt;"
 size="2"><b>Stop flasher
board run.&nbsp; Equivalent to <a href="#EXPCONTROL_END_RUN">EXPCONTROL_END_RUN</a>.</b></font>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p style="margin-bottom: 0in;"><br>
</p>
<p style="margin-bottom: 0in; page-break-before: auto;">
</p>
<h2><big><a name="differences"></a>DIFFERENCES BETWEEN DOMAPP AND
TESTDOMAPP<br>
</big></h2>
<ul>
  <li><span style="font-weight: bold;">Test pattern data is not
supported</span> by
the DOMAPP FPGA.</li>
  <li>Presence of LC bits in engineering
record indicates that the LC signals actually occurred (rather than
just required as in the Test FPGA).</li>
  <li>Software data compression not implemented (yet)</li>
  <li><font style="font-size: 11pt;" size="2"><span
 style="font-weight: bold;">DATA_ACC_RESET_LBM removed</span>.&nbsp;
This is now done when starting a data taking run (<a
 href="#EXPCONTROL_BEGIN_RUN">EXPCONTROL_BEGIN_RUN</a>)</font></li>
  <li><font style="font-size: 11pt;" size="2"><span
 style="font-weight: bold;">"Heartbeat events"</span> are now
interleaved with SPE triggers to aid in upstream Splicer-type
operation.&nbsp; The heartbeat events are "Forced Triggers" (formerly
known as CPU triggers) and can also be used to form a running pedestal
average for each ATWD/FADC channel</font></li>
  <li><span style="font-weight: bold;">Front end pulser can only be
started before the run starts</span>, and <span
 style="font-weight: bold;"> can only be used in
trigger mode 2</span> (SPE data).</li>
  <li><font style="font-size: 11pt;" size="2"><span
 style="font-weight: bold;">Pulser rate is now relevant even if pulser
is off!&nbsp; If the pulser is off, the rate is the heartbeat event
rate.</span>&nbsp; <span style="font-weight: bold;">THE DEFAULT RATE
IS 1 HZ.</span>&nbsp; If the FE pulser is on, the rate is the FE pulser
rate.&nbsp; This is because both the heartbeat events and the pulser
events are considered by Thorsten's FPGA design to be calibration
sources and there is only one rate control.</font></li>
  <li><font style="font-size: 11pt;" size="2">Triggering in the DOM is
now <span style="font-weight: bold;">disabled </span>momentarily when
the PMT High Voltage is read out.</font></li>
  <li><font style="font-size: 11pt;" size="2">Scaler readouts now have
ONE SECOND COVERAGE (not 9/10ths of a second) and are spaced by a
minimum of 40,000,000 + 100 clock
ticks to avoid duplication of values.</font></li>
  <li><font style="font-size: 11pt;" size="2">Data
formats/compression: software compression not implemented (yet).</font><font
 style="font-size: 11pt;" size="2">&nbsp; <span
 style="font-family: courier new,courier,monospace;"></span></font><font
 style="font-size: 11pt;" size="2"><span
 style="font-family: courier new,courier,monospace;">DATA_ACCESS</span>
software compression messages are<span
 style="font-family: courier new,courier,monospace;"></span></font><span
 style="font-family: courier new,courier,monospace;"></span><span
 style="font-family: courier new,courier,monospace;"></span><font
 style="font-size: 11pt;" size="2"> no longer implemented.&nbsp;<span
 style="font-weight: bold;"> See "<a href="api.html#dataformats">DATA
FORMATS</a>"
below</span>
for current treatment of data compression and data formats.</font></li>
  <li><font style="font-size: 11pt;" size="2">In general, domapp tries
to log exceptions in the ASCII monitoring messages.&nbsp; Any
investigation into unexpected problems in DOM operation should include
an examination of the DOM monitoring stream, e.g. with the </font><font
 style="font-size: 11pt;" size="2"><span style="font-family: monospace;">decodemoni</span></font><font
 style="font-size: 11pt;" size="2"> tool in the domhub-tools project.</font></li>
  <li><font style="font-size: 11pt;" size="2"><span
 style="font-weight: bold;">DIFFERENCES IN LOCAL COINCIDENCE</span>:&nbsp;
In general, using just </font><font style="color: rgb(0, 0, 0);"
 size="3"><span style=""><span style="font-style: normal;"><font
 style="font-size: 11pt; color: rgb(153, 153, 153);" size="2"><a
 href="api.html#DSC_SET_LOCAL_COIN_MODE">SET_LOCAL_COIN_MODE</a> <span
 style="color: rgb(0, 0, 0);">and </span><a
 href="api.html#DSC_SET_LOCAL_COIN_WINDOW"><span
 style="color: rgb(0, 0, 0);">DSC</span>_SET_LOCAL_COIN_WINDOW</a> <span
 style="color: rgb(0, 0, 0);">will work as in testdomapp, except that
there are only two LC windows instead of four, and also one has new
functionality (e.g., soft or flabby local coincidence) as defined by </span><a
 style="color: rgb(0, 0, 0);" href="api.html#DSC_SET_LC_TYPE">DSC_SET_LC_TYPE</a><span
 style="color: rgb(0, 0, 0);">,&nbsp; </span><a
 style="color: rgb(0, 0, 0);" href="api.html#DSC_SET_LC_TX">DSC_SET_LC_TX</a><span
 style="color: rgb(0, 0, 0);">, </span><a style="color: rgb(0, 0, 0);"
 href="api.html#DSC_SET_LC_SRC">DSC_SET_LC_SRC</a><span
 style="color: rgb(0, 0, 0);">, </span><a style="color: rgb(0, 0, 0);"
 href="api.html#DSC_SET_LC_SPAN">DSC_SET_LC_SPAN</a><span
 style="color: rgb(0, 0, 0);">, and</span> <a
 href="api.html#DSC_SET_LC_CABLE_LEN">DSC_SET_LC_CABLE_LEN</a>.</font></span></span></font></li>
  <li><font style="color: rgb(0, 0, 0);" size="3"><span style=""><span
 style="font-style: normal;"><font
 style="font-size: 11pt; color: rgb(153, 153, 153);" size="2"><span
 style="color: rgb(0, 0, 0);">Analog MUX is disabled at startup.&nbsp; <a
 href="#DSC_MUX_SELECT">DSC_MUX_SELECT</a> selects which channel should
be enabled, but a value of 0xFF (255) now DISABLES the analog MUX
explicitly.</span></font></span></span></font></li>
  <li><font style="color: rgb(0, 0, 0);" size="3"><span style=""><span
 style="font-style: normal;"><font
 style="font-size: 11pt; color: rgb(153, 153, 153);" size="2"><span
 style="color: rgb(0, 0, 0);">EXPCONTROL_FORCE_RUN_RESET is
removed.&nbsp; Use <a href="#EXPCONTROL_END_RUN">EXPCONTROL_END_RUN</a>.</span></font></span></span></font></li>
  <li><font style="font-size: 11pt;" size="2"><a
 href="#DATA_ACC_RESET_MONI_BUF">DATA_ACC_RESET_MONI_BUF</a> message
was added.</font></li>
  <li><font style="font-size: 11pt;" size="2"><a
 href="#DATA_ACC_MONI_AVAIL">DATA_ACC_MONI_AVAIL</a> message was added.<br>
    </font></li>
</ul>
<b><br>
</b>
<p style="margin-bottom: 0in;"><span style=""><font size="3"><br>
</font></span></p>
</body>
</html>
